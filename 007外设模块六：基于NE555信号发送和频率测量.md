#### 外设模块六：基于NE555信号发送和频率测量

##### 概述

> 对于蓝桥杯竞赛平台CT107D板子上NE555电路，只需要知道2点就可以:
>
> [1] NE555电路是一个信号发生电路，其信号输出接到单片机的P34引脚，即单片机的T0引脚，**所以需要用没有涉及外设的引脚连接J3上的SIGNAl与P34引脚。**
>
> [2] 该**信号的频率大小可以通过Rb3可调电位器改变。**
>
> 因为NE555芯片基本上就是一个纯硬件的设计，没有可编程的内容，因此，一点电路确定了，就没有变化了，单片机也不需要对它有任何的配置。所以，在整个单片机测量频率的过程中，跟NE555芯片一点儿关系都没有，实际上考查的是你应用**定时/计数器测量信号频率**的技术。

设置定时器0为计数模式

```c
void Init_T0()
{
	TMOD = (TMOD & 0xf0) | 0x05;
    TH0 = 0;
	TL0 = 0;
}
void Init_T1()
{
    TMOD = (TMOD & 0x0f) | 0x10;
    TH1 = (65536-2000) / 256;
    TL1 = (65536-2000) % 256;
    
    EA = 1;
    ET1 = 1;
    TR1 = 1;
}
void Service_T1() interrupt 3
{
    TH1 = (65536-2000) / 256;
    TL1 = (65536-2000) % 256;
    
    if(++t_2ms == 250)
    {
        t_2ms = 0;
        f=~f;
        if(f == 1)
        {
            TH0 = 0;
		   TL0 = 0;
            TR0 = 1;
        }
        esle
        {
            TR0 = 0;
            temp_f = ((TH0<<8)+TL0)*2;
        }
    }
}
```